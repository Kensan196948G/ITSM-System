# 次回セッション実施タスク

**作成日**: 2025年12月27日
**現在の完成度**: 85%
**次のフェーズ**: Phase A-3完成 → Phase A-4移行

---

## 📊 現在の状態

### 完了済みフェーズ

✅ Week 1-2: セキュリティ基盤構築（100%）
✅ Phase A-1: テスト環境構築（100%）- 93テスト、100%合格
✅ Phase A-2: CI/CD基盤構築（100%）- ESLint, Prettier, GitHub Actions
✅ Phase A-3: 機能実装（85%）- 全13画面実装、基本モーダル追加

### 未完了タスク

🔄 Phase A-3: 詳細UI実装（残り15%）
- テーブル行クリックイベント（7機能）
- フル機能モーダルダイアログ
- CRUD操作（新規作成、編集、削除）

---

## 🎯 次回セッション: 即時着手タスク

### 優先度1: UI/UX完成（推定3時間）

#### タスク1: テーブル行クリックイベント実装（1時間）

**対象機能**:
- 問題管理
- リリース管理
- サービス要求管理
- SLA管理
- ナレッジ管理
- キャパシティ管理
- 脆弱性管理

**実装内容**:
```javascript
// 各renderXXX()関数内
row.style.cursor = 'pointer';
row.addEventListener('click', () => showDetailModal('詳細タイトル', dataObject));
```

**成果物**: クリック可能なテーブル行

---

#### タスク2: アクションボタン実装（1時間）

**各画面にボタン追加**:
- 新規作成ボタン
- 編集ボタン（行ごと）
- 削除ボタン（行ごと）
- エクスポートボタン

**実装例**:
```javascript
const header = createEl('div');
header.style.display = 'flex';
header.style.justifyContent = 'space-between';

const createBtn = createEl('button', {
  className: 'btn-primary',
  textContent: '新規作成'
});
createBtn.addEventListener('click', () => openCreateModal());
header.appendChild(createBtn);
```

---

#### タスク3: フルモーダルダイアログ実装（1時間）

**実装するモーダル**:
1. インシデント作成・編集モーダル（既存を拡張）
2. RFC作成・承認モーダル（既存を拡張）
3. 問題作成・編集モーダル
4. リリース作成・編集モーダル
5. サービス要求作成モーダル
6. 脆弱性作成・編集モーダル

**機能**:
- フォーム入力
- バリデーション
- 保存ボタン（POST/PUT API呼び出し）
- キャンセルボタン

---

### 優先度2: POST/PUT API実装（推定2時間）

現在、全てのエンドポイントはGETのみです。CRUD操作を完成させます。

#### 必要なAPIエンドポイント

**問題管理**:
- POST /api/v1/problems
- PUT /api/v1/problems/:id
- DELETE /api/v1/problems/:id

**リリース管理**:
- POST /api/v1/releases
- PUT /api/v1/releases/:id

**サービス要求管理**:
- POST /api/v1/service-requests
- PUT /api/v1/service-requests/:id

**脆弱性管理**:
- POST /api/v1/vulnerabilities
- PUT /api/v1/vulnerabilities/:id

**その他機能も同様**

**実装場所**: `backend/server.js`
**バリデーション**: `backend/middleware/validation.js`に追加

---

### 優先度3: データテーブル機能強化（推定2時間）

#### 実装機能

1. **ページネーション**
   - 10件/20件/50件表示切替
   - ページ送り/戻し
   - 総ページ数表示

2. **ソート機能**
   - 列ヘッダークリックでソート
   - 昇順/降順切替
   - ソートアイコン表示

3. **フィルタ・検索**
   - 検索バー追加
   - ステータスフィルタ
   - 優先度フィルタ
   - 日付範囲フィルタ

4. **エクスポート**
   - CSVエクスポートボタン
   - Excelエクスポートボタン
   - utils/tableUtils.js活用

**実装場所**: 各`renderXXX()`関数

---

### 優先度4: ダッシュボードグラフ完成（推定1時間）

**エージェントが実装中のChart.js機能を確認・統合**:
- インシデント推移グラフ
- 優先度分布（円グラフ）
- SLA達成率推移
- CSF進捗（レーダーチャート）

---

## 📋 Phase A-3 完了チェックリスト

Phase A-3を完全に完了するために：

### UI/UX
- [ ] 全テーブル行がクリック可能
- [ ] 詳細モーダル実装（7機能）
- [ ] 新規作成モーダル実装（7機能）
- [ ] 編集モーダル実装（7機能）
- [ ] 削除確認ダイアログ

### API
- [ ] POST API実装（7機能）
- [ ] PUT API実装（7機能）
- [ ] DELETE API実装（7機能）
- [ ] バリデーション追加

### テーブル機能
- [ ] ページネーション
- [ ] ソート機能
- [ ] 検索・フィルタ
- [ ] CSVエクスポート
- [ ] Excelエクスポート

### グラフ
- [ ] 4種類のグラフ表示
- [ ] レスポンシブ対応
- [ ] データ更新機能

### テスト
- [ ] 新機能のユニットテスト
- [ ] 新機能の統合テスト
- [ ] UIテスト

---

## 🎯 次のフェーズ: Phase A-4（ドキュメント整備）

Phase A-3完了後、Phase A-4に移行します。

### Phase A-4 実施内容（Week 8-9）

#### 1. OpenAPI仕様書生成（3日）
```bash
npm install swagger-jsdoc swagger-ui-express
```
- 全20エンドポイントのJSDoc追加
- Swagger UI設定
- APIドキュメント自動生成

#### 2. 開発者ガイド作成（2日）
- プロジェクト構造説明
- コーディング規約
- 新機能追加手順
- トラブルシューティング

#### 3. テスト計画書更新（1日）
- 新機能のテストケース追加
- E2Eテストシナリオ更新

#### 4. 運用マニュアル作成（2日）
- 日次/週次/月次運用手順
- バックアップ・リストア手順
- インシデント対応フロー

---

## 📝 次回セッション開始コマンド

```bash
# 1. サーバー起動
./start-system.sh

# 2. 開発状態確認
git log --oneline -10
cat Docs/03_開発計画（Development-Plan）/次回セッション_実施タスク.md

# 3. テーブル行クリックイベント実装開始
# app.jsの各renderXXX()関数を編集

# 4. テスト実行
npm test
```

---

## 🎊 現在の開発完成度

```
全体:          85% █████████████░
├─ セキュリティ: 100% ██████████████
├─ 基本機能:     100% ██████████████
├─ テスト:       40% ██████░░░░░░░░
├─ CI/CD:       100% ██████████████
├─ UI/UX:       75% ████████████░░
├─ ドキュメント:  80% █████████████░
└─ 本番準備:     35% █████░░░░░░░░░
```

### マイルストーン

| マイルストーン | 状態 | 達成日 |
|-------------|------|--------|
| M0: セキュリティ基盤 | ✅ | 2025-12-27 |
| M1: テスト基盤 | ✅ | 2025-12-27 |
| M2: CI/CD稼働 | ✅ | 2025-12-27 |
| M3: 機能実装 | 🔄 85% | 進行中 |
| M4: ドキュメント | 📅 | Week 8-9予定 |
| M5: Phase A完了 | 📅 | Week 10予定 |

---

## 🔄 残りタスク概要

### 短期（次回セッション、3-5時間）
1. テーブル行クリックイベント追加
2. フルモーダルダイアログ実装
3. POST/PUT/DELETE API実装

### 中期（Week 8-9、2週間）
4. OpenAPI仕様書生成
5. ドキュメント整備
6. Phase A-3完全完了

### 長期（Week 10-20、2-3ヶ月）
7. Phase A完了
8. Phase B（本番環境移行）

---

**作成者**: Claude Sonnet 4.5
**次回セッション**: 上記タスクから実施開始

---
### 更新メモ (2025-12-29)
- 監査ダッシュボード/コンプライアンス管理のUI詳細を反映
- 脆弱性管理の編集・削除を有効化
- ドキュメント参照先をDocs/に統一（docs/フォルダ削除）

