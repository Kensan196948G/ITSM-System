<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITSM運用管理システム - NIST CSF 2.0対応</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
            --bg-color: #f1f5f9;
            --card-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --sidebar-bg: #ffffff;
            --sidebar-text: #475569;
            --sidebar-hover: #f1f5f9;
            --govern-color: #8b5cf6;
            --identify-color: #3b82f6;
            --protect-color: #22c55e;
            --detect-color: #f59e0b;
            --respond-color: #ef4444;
            --recover-color: #06b6d4;
        }
        body { font-family: 'Segoe UI', 'Hiragino Sans', 'Meiryo', sans-serif; background-color: var(--bg-color); color: var(--text-primary); line-height: 1.6; }
        .app-container { display: flex; min-height: 100vh; }
        .sidebar { width: 280px; background: var(--sidebar-bg); color: var(--sidebar-text); position: fixed; height: 100vh; overflow-y: auto; transition: transform 0.3s ease; z-index: 1000; border-right: 1px solid var(--border-color); }
        .sidebar-header { padding: 20px; border-bottom: 1px solid var(--border-color); }
        .sidebar-logo { display: flex; align-items: center; gap: 12px; color: var(--primary-color); font-size: 1.25rem; font-weight: 600; }
        .sidebar-logo svg { width: 32px; height: 32px; }
        .sidebar-nav { padding: 12px 0; }
        .nav-section { margin-bottom: 4px; }
        .nav-section-title { padding: 12px 20px 8px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-secondary); font-weight: 600; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 10px 20px; color: var(--sidebar-text); text-decoration: none; transition: all 0.2s; cursor: pointer; border-left: 3px solid transparent; font-size: 0.875rem; }
        .nav-item:hover { background: var(--sidebar-hover); color: var(--primary-color); }
        .nav-item.active { background: rgba(37, 99, 235, 0.08); color: var(--primary-color); border-left-color: var(--primary-color); font-weight: 500; }
        .nav-item svg { width: 18px; height: 18px; flex-shrink: 0; }
        .nav-badge { margin-left: auto; background: var(--danger-color); color: #fff; font-size: 0.65rem; padding: 2px 6px; border-radius: 10px; }
        .nav-item.govern { border-left-color: var(--govern-color); }
        .nav-item.govern.active, .nav-item.govern:hover { color: var(--govern-color); background: rgba(139, 92, 246, 0.08); }
        .nav-item.identify { border-left-color: var(--identify-color); }
        .nav-item.identify.active, .nav-item.identify:hover { color: var(--identify-color); background: rgba(59, 130, 246, 0.08); }
        .nav-item.protect { border-left-color: var(--protect-color); }
        .nav-item.protect.active, .nav-item.protect:hover { color: var(--protect-color); background: rgba(34, 197, 94, 0.08); }
        .nav-item.detect { border-left-color: var(--detect-color); }
        .nav-item.detect.active, .nav-item.detect:hover { color: var(--detect-color); background: rgba(245, 158, 11, 0.08); }
        .nav-item.respond { border-left-color: var(--respond-color); }
        .nav-item.respond.active, .nav-item.respond:hover { color: var(--respond-color); background: rgba(239, 68, 68, 0.08); }
        .nav-item.recover { border-left-color: var(--recover-color); }
        .nav-item.recover.active, .nav-item.recover:hover { color: var(--recover-color); background: rgba(6, 182, 212, 0.08); }
        .main-content { flex: 1; margin-left: 280px; }
        .header { background: var(--card-bg); padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .header-left { display: flex; align-items: center; gap: 16px; }
        .menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
        .search-box { display: flex; align-items: center; background: var(--bg-color); border-radius: 8px; padding: 8px 16px; width: 320px; }
        .search-box input { border: none; background: none; outline: none; width: 100%; margin-left: 8px; font-size: 0.875rem; }
        .header-right { display: flex; align-items: center; gap: 16px; }
        .header-icon { position: relative; padding: 8px; border-radius: 8px; cursor: pointer; transition: background 0.2s; }
        .header-icon:hover { background: var(--bg-color); }
        .notification-dot { position: absolute; top: 6px; right: 6px; width: 8px; height: 8px; background: var(--danger-color); border-radius: 50%; }
        .user-menu { display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 4px 12px 4px 4px; border-radius: 8px; transition: background 0.2s; }
        .user-menu:hover { background: var(--bg-color); }
        .user-avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--primary-color); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 600; }
        .user-info { text-align: left; }
        .user-name { font-weight: 600; font-size: 0.875rem; }
        .user-role { font-size: 0.75rem; color: var(--text-secondary); }
        .content { padding: 24px; }
        .page-header { margin-bottom: 24px; }
        .page-title { font-size: 1.5rem; font-weight: 600; margin-bottom: 4px; }
        .page-subtitle { color: var(--text-secondary); font-size: 0.875rem; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .stat-card { background: var(--card-bg); border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .stat-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
        .stat-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        .stat-icon.blue { background: rgba(37, 99, 235, 0.1); color: var(--primary-color); }
        .stat-icon.green { background: rgba(34, 197, 94, 0.1); color: var(--success-color); }
        .stat-icon.orange { background: rgba(245, 158, 11, 0.1); color: var(--warning-color); }
        .stat-icon.red { background: rgba(239, 68, 68, 0.1); color: var(--danger-color); }
        .stat-icon.purple { background: rgba(139, 92, 246, 0.1); color: #8b5cf6; }
        .stat-icon.cyan { background: rgba(6, 182, 212, 0.1); color: var(--info-color); }
        .stat-value { font-size: 1.75rem; font-weight: 700; margin-bottom: 2px; }
        .stat-label { color: var(--text-secondary); font-size: 0.8rem; }
        .stat-change { font-size: 0.7rem; display: flex; align-items: center; gap: 4px; margin-top: 6px; }
        .stat-change.positive { color: var(--success-color); }
        .stat-change.negative { color: var(--danger-color); }
        .card { background: var(--card-bg); border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 24px; }
        .card-header { padding: 16px 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; }
        .card-title { font-size: 1rem; font-weight: 600; }
        .card-body { padding: 20px; }
        .btn { display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: 8px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: all 0.2s; border: none; text-decoration: none; }
        .btn-primary { background: var(--primary-color); color: #fff; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-secondary { background: var(--bg-color); color: var(--text-primary); border: 1px solid var(--border-color); }
        .btn-secondary:hover { background: var(--border-color); }
        .btn-sm { padding: 6px 12px; font-size: 0.75rem; }
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px 16px; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { font-weight: 600; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); background: var(--bg-color); }
        tr:hover { background: var(--bg-color); }
        tr.clickable { cursor: pointer; }
        .status-badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 500; }
        .status-badge::before { content: ''; width: 6px; height: 6px; border-radius: 50%; }
        .status-open { background: rgba(239, 68, 68, 0.1); color: var(--danger-color); }
        .status-open::before { background: var(--danger-color); }
        .status-progress { background: rgba(245, 158, 11, 0.1); color: var(--warning-color); }
        .status-progress::before { background: var(--warning-color); }
        .status-resolved { background: rgba(34, 197, 94, 0.1); color: var(--success-color); }
        .status-resolved::before { background: var(--success-color); }
        .status-pending { background: rgba(100, 116, 139, 0.1); color: var(--secondary-color); }
        .status-pending::before { background: var(--secondary-color); }
        .priority-badge { padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: 500; }
        .priority-critical { background: var(--danger-color); color: #fff; }
        .priority-high { background: var(--warning-color); color: #fff; }
        .priority-medium { background: var(--info-color); color: #fff; }
        .priority-low { background: var(--secondary-color); color: #fff; }
        .tabs { display: flex; gap: 4px; border-bottom: 1px solid var(--border-color); margin-bottom: 20px; flex-wrap: wrap; }
        .tab { padding: 12px 16px; cursor: pointer; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab:hover { color: var(--text-primary); }
        .tab.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .activity-list { list-style: none; }
        .activity-item { display: flex; gap: 12px; padding: 12px 0; border-bottom: 1px solid var(--border-color); }
        .activity-item:last-child { border-bottom: none; }
        .activity-icon { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .activity-icon.incident { background: rgba(239, 68, 68, 0.1); color: var(--danger-color); }
        .activity-icon.change { background: rgba(37, 99, 235, 0.1); color: var(--primary-color); }
        .activity-icon.service { background: rgba(34, 197, 94, 0.1); color: var(--success-color); }
        .activity-content { flex: 1; }
        .activity-title { font-weight: 500; margin-bottom: 2px; font-size: 0.9rem; }
        .activity-time { font-size: 0.75rem; color: var(--text-secondary); }
        .progress-bar { height: 8px; background: var(--border-color); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 4px; transition: width 0.3s ease; }
        .progress-fill.blue { background: var(--primary-color); }
        .progress-fill.green { background: var(--success-color); }
        .progress-fill.orange { background: var(--warning-color); }
        .progress-fill.purple { background: var(--govern-color); }
        .sla-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .sla-item { text-align: center; padding: 16px; background: var(--bg-color); border-radius: 8px; }
        .sla-value { font-size: 1.5rem; font-weight: 700; }
        .sla-value.good { color: var(--success-color); }
        .sla-value.warning { color: var(--warning-color); }
        .sla-value.danger { color: var(--danger-color); }
        .sla-label { font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px; }
        .catalog-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .catalog-card { background: var(--card-bg); border-radius: 12px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.2s; cursor: pointer; border: 2px solid transparent; }
        .catalog-card:hover { border-color: var(--primary-color); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .catalog-icon { width: 56px; height: 56px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; }
        .catalog-icon svg { width: 28px; height: 28px; }
        .catalog-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 8px; }
        .catalog-desc { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 16px; line-height: 1.5; }
        .catalog-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.75rem; color: var(--text-secondary); }
        .catalog-sla { display: flex; align-items: center; gap: 4px; }
        /* NIST CSF Styles */
        .csf-overview { display: grid; grid-template-columns: repeat(6, 1fr); gap: 12px; margin-bottom: 24px; }
        .csf-card { background: var(--card-bg); border-radius: 12px; padding: 16px; text-align: center; cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
        .csf-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .csf-card.govern { border-color: var(--govern-color); }
        .csf-card.govern .csf-card-icon { background: rgba(139, 92, 246, 0.1); color: var(--govern-color); }
        .csf-card.identify { border-color: var(--identify-color); }
        .csf-card.identify .csf-card-icon { background: rgba(59, 130, 246, 0.1); color: var(--identify-color); }
        .csf-card.protect { border-color: var(--protect-color); }
        .csf-card.protect .csf-card-icon { background: rgba(34, 197, 94, 0.1); color: var(--protect-color); }
        .csf-card.detect { border-color: var(--detect-color); }
        .csf-card.detect .csf-card-icon { background: rgba(245, 158, 11, 0.1); color: var(--detect-color); }
        .csf-card.respond { border-color: var(--respond-color); }
        .csf-card.respond .csf-card-icon { background: rgba(239, 68, 68, 0.1); color: var(--respond-color); }
        .csf-card.recover { border-color: var(--recover-color); }
        .csf-card.recover .csf-card-icon { background: rgba(6, 182, 212, 0.1); color: var(--recover-color); }
        .csf-card-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px; }
        .csf-card-icon svg { width: 24px; height: 24px; }
        .csf-card-title { font-weight: 600; font-size: 0.9rem; margin-bottom: 4px; }
        .csf-card-score { font-size: 1.25rem; font-weight: 700; }
        .csf-category { background: var(--card-bg); border-radius: 12px; padding: 20px; margin-bottom: 16px; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--border-color); }
        .csf-category:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .csf-category.govern { border-left-color: var(--govern-color); }
        .csf-category.identify { border-left-color: var(--identify-color); }
        .csf-category.protect { border-left-color: var(--protect-color); }
        .csf-category.detect { border-left-color: var(--detect-color); }
        .csf-category.respond { border-left-color: var(--respond-color); }
        .csf-category.recover { border-left-color: var(--recover-color); }
        .csf-category-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .csf-category-id { font-size: 0.75rem; color: var(--text-secondary); font-weight: 600; }
        .csf-category-title { font-weight: 600; font-size: 1rem; }
        .csf-category-desc { font-size: 0.85rem; color: var(--text-secondary); }
        .csf-category-score { display: flex; align-items: center; gap: 8px; }
        .csf-score-bar { width: 100px; height: 8px; background: var(--border-color); border-radius: 4px; overflow: hidden; }
        .csf-score-fill { height: 100%; border-radius: 4px; }
        .csf-score-text { font-size: 0.85rem; font-weight: 600; min-width: 40px; text-align: right; }
        /* Modal */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal { background: var(--card-bg); border-radius: 12px; width: 100%; max-width: 800px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; }
        .modal-header { padding: 20px 24px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
        .modal-title { font-size: 1.25rem; font-weight: 600; }
        .modal-close { background: none; border: none; cursor: pointer; padding: 4px; color: var(--text-secondary); }
        .modal-body { padding: 24px; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 16px 24px; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 12px; flex-shrink: 0; }
        .form-group { margin-bottom: 16px; }
        .form-label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 6px; }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.875rem; transition: border-color 0.2s; }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary-color); }
        .form-textarea { resize: vertical; min-height: 100px; }
        .form-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        /* CSF Detail Modal */
        .csf-detail-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid var(--border-color); }
        .csf-detail-icon { width: 64px; height: 64px; border-radius: 16px; display: flex; align-items: center; justify-content: center; }
        .csf-detail-icon svg { width: 32px; height: 32px; }
        .csf-detail-info h2 { font-size: 1.5rem; font-weight: 600; margin-bottom: 4px; }
        .csf-detail-info p { color: var(--text-secondary); }
        .csf-subcategory { background: var(--bg-color); border-radius: 8px; padding: 16px; margin-bottom: 12px; }
        .csf-subcategory-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
        .csf-subcategory-id { font-size: 0.75rem; font-weight: 600; color: var(--text-secondary); background: var(--card-bg); padding: 2px 8px; border-radius: 4px; }
        .csf-subcategory-title { font-weight: 600; margin-bottom: 4px; }
        .csf-subcategory-desc { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 12px; }
        .csf-control-list { list-style: none; }
        .csf-control-item { display: flex; align-items: center; gap: 8px; padding: 8px 0; border-top: 1px solid var(--border-color); font-size: 0.85rem; }
        .csf-control-status { width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .csf-control-status.implemented { background: var(--success-color); color: #fff; }
        .csf-control-status.partial { background: var(--warning-color); color: #fff; }
        .csf-control-status.planned { background: var(--info-color); color: #fff; }
        .csf-control-status.not-implemented { background: var(--border-color); color: var(--text-secondary); }
        .csf-maturity { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-top: 16px; }
        .csf-maturity-level { text-align: center; padding: 12px 8px; background: var(--bg-color); border-radius: 8px; font-size: 0.75rem; }
        .csf-maturity-level.current { background: var(--primary-color); color: #fff; }
        .csf-maturity-level span { display: block; font-weight: 600; font-size: 1rem; margin-bottom: 4px; }
        .page-view { display: none; }
        .page-view.active { display: block; }
        @media (max-width: 1200px) { .csf-overview { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 1024px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } .sla-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) { .sidebar { transform: translateX(-100%); } .sidebar.open { transform: translateX(0); } .main-content { margin-left: 0; } .menu-toggle { display: block; } .search-box { width: 200px; } .stats-grid { grid-template-columns: repeat(2, 1fr); } .csf-overview { grid-template-columns: repeat(2, 1fr); } .catalog-grid { grid-template-columns: 1fr; } }
        @media (max-width: 480px) { .stats-grid, .csf-overview { grid-template-columns: 1fr; } .search-box { display: none; } .user-info { display: none; } .form-row { grid-template-columns: 1fr; } .csf-maturity { grid-template-columns: repeat(3, 1fr); } }
    </style>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                    <span>ITSM Portal</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">メイン</div>
                    <a class="nav-item active" data-page="dashboard">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                        <span>ダッシュボード</span>
                    </a>
                    <a class="nav-item" data-page="service-catalog">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
                        <span>サービスカタログ</span>
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">NIST CSF 2.0</div>
                    <a class="nav-item govern" data-page="csf-govern">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>
                        <span>統治 (GV)</span>
                        <span class="nav-badge" style="background:var(--govern-color);">85%</span>
                    </a>
                    <a class="nav-item identify" data-page="csf-identify">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                        <span>識別 (ID)</span>
                        <span class="nav-badge" style="background:var(--identify-color);">78%</span>
                    </a>
                    <a class="nav-item protect" data-page="csf-protect">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <span>防御 (PR)</span>
                        <span class="nav-badge" style="background:var(--protect-color);">82%</span>
                    </a>
                    <a class="nav-item detect" data-page="csf-detect">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                        <span>検知 (DE)</span>
                        <span class="nav-badge" style="background:var(--detect-color);">75%</span>
                    </a>
                    <a class="nav-item respond" data-page="csf-respond">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                        <span>対応 (RS)</span>
                        <span class="nav-badge" style="background:var(--respond-color);">80%</span>
                    </a>
                    <a class="nav-item recover" data-page="csf-recover">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                        <span>復旧 (RC)</span>
                        <span class="nav-badge" style="background:var(--recover-color);">72%</span>
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">サービス管理</div>
                    <a class="nav-item" data-page="incidents">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                        <span>インシデント管理</span>
                        <span class="nav-badge">12</span>
                    </a>
                    <a class="nav-item" data-page="changes">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/></svg>
                        <span>変更管理</span>
                        <span class="nav-badge">4</span>
                    </a>
                    <a class="nav-item" data-page="assets">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                        <span>資産管理 (CMDB)</span>
                    </a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">設定</div>
                    <a class="nav-item" data-page="settings">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                        <span>システム設定</span>
                    </a>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
                    <div class="search-box"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg><input type="text" placeholder="チケット、資産、統制を検索..."></div>
                </div>
                <div class="header-right">
                    <div class="header-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg><span class="notification-dot"></span></div>
                    <div class="user-menu"><div class="user-avatar">KA</div><div class="user-info"><div class="user-name">Ken Aritoh</div><div class="user-role">システム管理者</div></div></div>
                </div>
            </header>

            <div class="content">
                <!-- Dashboard Page -->
                <div class="page-view active" id="page-dashboard">
                    <div class="page-header"><h1 class="page-title">ダッシュボード</h1><p class="page-subtitle">ITSM運用状況とNIST CSF 2.0準拠状況の概要</p></div>

                    <!-- CSF Overview Cards -->
                    <div class="csf-overview">
                        <div class="csf-card govern" onclick="showPage('csf-govern')">
                            <div class="csf-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div>
                            <div class="csf-card-title">統治 (GV)</div>
                            <div class="csf-card-score" style="color:var(--govern-color);">85%</div>
                        </div>
                        <div class="csf-card identify" onclick="showPage('csf-identify')">
                            <div class="csf-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></div>
                            <div class="csf-card-title">識別 (ID)</div>
                            <div class="csf-card-score" style="color:var(--identify-color);">78%</div>
                        </div>
                        <div class="csf-card protect" onclick="showPage('csf-protect')">
                            <div class="csf-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div>
                            <div class="csf-card-title">防御 (PR)</div>
                            <div class="csf-card-score" style="color:var(--protect-color);">82%</div>
                        </div>
                        <div class="csf-card detect" onclick="showPage('csf-detect')">
                            <div class="csf-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div>
                            <div class="csf-card-title">検知 (DE)</div>
                            <div class="csf-card-score" style="color:var(--detect-color);">75%</div>
                        </div>
                        <div class="csf-card respond" onclick="showPage('csf-respond')">
                            <div class="csf-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
                            <div class="csf-card-title">対応 (RS)</div>
                            <div class="csf-card-score" style="color:var(--respond-color);">80%</div>
                        </div>
                        <div class="csf-card recover" onclick="showPage('csf-recover')">
                            <div class="csf-card-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg></div>
                            <div class="csf-card-title">復旧 (RC)</div>
                            <div class="csf-card-score" style="color:var(--recover-color);">72%</div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card"><div class="stat-header"><div><div class="stat-value">12</div><div class="stat-label">オープンインシデント</div></div><div class="stat-icon red"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg></div></div><div class="stat-change negative">前週比 +3件</div></div>
                        <div class="stat-card"><div class="stat-header"><div><div class="stat-value">98.5%</div><div class="stat-label">SLA達成率</div></div><div class="stat-icon green"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div></div><div class="stat-change positive">前月比 +1.2%</div></div>
                        <div class="stat-card"><div class="stat-header"><div><div class="stat-value">78.7%</div><div class="stat-label">CSF総合スコア</div></div><div class="stat-icon purple"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div></div><div class="stat-change positive">前月比 +2.3%</div></div>
                        <div class="stat-card"><div class="stat-header"><div><div class="stat-value">247</div><div class="stat-label">今月解決件数</div></div><div class="stat-icon blue"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div></div><div class="stat-change positive">前月比 +18件</div></div>
                    </div>

                    <div class="grid-2">
                        <div class="card"><div class="card-header"><h3 class="card-title">最近のインシデント</h3><button class="btn btn-secondary btn-sm" onclick="showPage('incidents')">すべて表示</button></div><div class="card-body"><table><thead><tr><th>ID</th><th>件名</th><th>優先度</th><th>状態</th></tr></thead><tbody><tr><td>INC-0892</td><td>メールサーバー接続エラー</td><td><span class="priority-badge priority-critical">緊急</span></td><td><span class="status-badge status-progress">対応中</span></td></tr><tr><td>INC-0891</td><td>VPN接続が断続的に切断</td><td><span class="priority-badge priority-high">高</span></td><td><span class="status-badge status-open">オープン</span></td></tr><tr><td>INC-0890</td><td>プリンター印刷キュー停止</td><td><span class="priority-badge priority-medium">中</span></td><td><span class="status-badge status-progress">対応中</span></td></tr></tbody></table></div></div>
                        <div class="card"><div class="card-header"><h3 class="card-title">CSF改善タスク</h3></div><div class="card-body"><ul class="activity-list"><li class="activity-item"><div class="activity-icon" style="background:rgba(245,158,11,0.1);color:var(--warning-color);"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div><div class="activity-content"><div class="activity-title">DE.CM-01: ネットワーク監視強化</div><div class="activity-time">期限: 01/31 - 担当: セキュリティチーム</div></div></li><li class="activity-item"><div class="activity-icon" style="background:rgba(6,182,212,0.1);color:var(--recover-color);"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/></svg></div><div class="activity-content"><div class="activity-title">RC.RP-01: 復旧計画の更新</div><div class="activity-time">期限: 02/15 - 担当: インフラチーム</div></div></li><li class="activity-item"><div class="activity-icon" style="background:rgba(59,130,246,0.1);color:var(--identify-color);"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/></svg></div><div class="activity-content"><div class="activity-title">ID.AM-01: 資産台帳の更新</div><div class="activity-time">期限: 02/28 - 担当: IT管理チーム</div></div></li></ul></div></div>
                    </div>
                </div>

                <!-- CSF Govern Page -->
                <div class="page-view" id="page-csf-govern">
                    <div class="page-header"><h1 class="page-title">統治 (GOVERN)</h1><p class="page-subtitle">組織のサイバーセキュリティリスク管理戦略、期待事項、ポリシーを確立・監視</p></div>

                    <div class="card">
                        <div class="card-header"><h3 class="card-title">成熟度レベル</h3></div>
                        <div class="card-body">
                            <div class="csf-maturity">
                                <div class="csf-maturity-level"><span>1</span>初期</div>
                                <div class="csf-maturity-level"><span>2</span>反復可能</div>
                                <div class="csf-maturity-level"><span>3</span>定義済み</div>
                                <div class="csf-maturity-level current"><span>4</span>管理</div>
                                <div class="csf-maturity-level"><span>5</span>最適化</div>
                            </div>
                        </div>
                    </div>

                    <div class="csf-category govern" onclick="openCsfModal('gv-oc')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">GV.OC</div><div class="csf-category-title">組織コンテキスト</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:90%;background:var(--govern-color);"></div></div><div class="csf-score-text">90%</div></div>
                        </div>
                        <div class="csf-category-desc">組織のミッション、利害関係者の期待、依存関係、法的・規制要件を理解</div>
                    </div>
                    <div class="csf-category govern" onclick="openCsfModal('gv-rm')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">GV.RM</div><div class="csf-category-title">リスク管理戦略</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:85%;background:var(--govern-color);"></div></div><div class="csf-score-text">85%</div></div>
                        </div>
                        <div class="csf-category-desc">組織の優先事項、制約、リスク許容度、仮定を確立し、運用リスク判断をサポート</div>
                    </div>
                    <div class="csf-category govern" onclick="openCsfModal('gv-rr')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">GV.RR</div><div class="csf-category-title">役割・責任・権限</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:80%;background:var(--govern-color);"></div></div><div class="csf-score-text">80%</div></div>
                        </div>
                        <div class="csf-category-desc">サイバーセキュリティの役割、責任、権限を確立し、伝達</div>
                    </div>
                    <div class="csf-category govern" onclick="openCsfModal('gv-po')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">GV.PO</div><div class="csf-category-title">ポリシー</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:88%;background:var(--govern-color);"></div></div><div class="csf-score-text">88%</div></div>
                        </div>
                        <div class="csf-category-desc">組織のサイバーセキュリティポリシーを確立、伝達、施行</div>
                    </div>
                    <div class="csf-category govern" onclick="openCsfModal('gv-ov')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">GV.OV</div><div class="csf-category-title">監督</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:82%;background:var(--govern-color);"></div></div><div class="csf-score-text">82%</div></div>
                        </div>
                        <div class="csf-category-desc">組織全体のサイバーセキュリティリスク管理活動と結果のレビュー</div>
                    </div>
                    <div class="csf-category govern" onclick="openCsfModal('gv-sc')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">GV.SC</div><div class="csf-category-title">サプライチェーンリスク管理</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:75%;background:var(--govern-color);"></div></div><div class="csf-score-text">75%</div></div>
                        </div>
                        <div class="csf-category-desc">サイバーサプライチェーンリスク管理プロセスの識別、確立、管理、監視、改善</div>
                    </div>
                </div>

                <!-- CSF Identify Page -->
                <div class="page-view" id="page-csf-identify">
                    <div class="page-header"><h1 class="page-title">識別 (IDENTIFY)</h1><p class="page-subtitle">組織の現在のサイバーセキュリティリスクを理解</p></div>

                    <div class="card">
                        <div class="card-header"><h3 class="card-title">成熟度レベル</h3></div>
                        <div class="card-body">
                            <div class="csf-maturity">
                                <div class="csf-maturity-level"><span>1</span>初期</div>
                                <div class="csf-maturity-level"><span>2</span>反復可能</div>
                                <div class="csf-maturity-level current"><span>3</span>定義済み</div>
                                <div class="csf-maturity-level"><span>4</span>管理</div>
                                <div class="csf-maturity-level"><span>5</span>最適化</div>
                            </div>
                        </div>
                    </div>

                    <div class="csf-category identify" onclick="openCsfModal('id-am')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">ID.AM</div><div class="csf-category-title">資産管理</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:80%;background:var(--identify-color);"></div></div><div class="csf-score-text">80%</div></div>
                        </div>
                        <div class="csf-category-desc">組織がビジネス目標達成とリスク戦略に沿って、資産を識別・管理</div>
                    </div>
                    <div class="csf-category identify" onclick="openCsfModal('id-ra')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">ID.RA</div><div class="csf-category-title">リスクアセスメント</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:75%;background:var(--identify-color);"></div></div><div class="csf-score-text">75%</div></div>
                        </div>
                        <div class="csf-category-desc">組織が資産に対するサイバーセキュリティリスクを理解</div>
                    </div>
                    <div class="csf-category identify" onclick="openCsfModal('id-im')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">ID.IM</div><div class="csf-category-title">改善</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:78%;background:var(--identify-color);"></div></div><div class="csf-score-text">78%</div></div>
                        </div>
                        <div class="csf-category-desc">組織のサイバーセキュリティリスク管理プロセスの改善を識別</div>
                    </div>
                </div>

                <!-- CSF Protect Page -->
                <div class="page-view" id="page-csf-protect">
                    <div class="page-header"><h1 class="page-title">防御 (PROTECT)</h1><p class="page-subtitle">サイバーセキュリティリスクを管理するための保護措置を使用</p></div>

                    <div class="card">
                        <div class="card-header"><h3 class="card-title">成熟度レベル</h3></div>
                        <div class="card-body">
                            <div class="csf-maturity">
                                <div class="csf-maturity-level"><span>1</span>初期</div>
                                <div class="csf-maturity-level"><span>2</span>反復可能</div>
                                <div class="csf-maturity-level"><span>3</span>定義済み</div>
                                <div class="csf-maturity-level current"><span>4</span>管理</div>
                                <div class="csf-maturity-level"><span>5</span>最適化</div>
                            </div>
                        </div>
                    </div>

                    <div class="csf-category protect" onclick="openCsfModal('pr-aa')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">PR.AA</div><div class="csf-category-title">ID管理・認証・アクセス制御</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:85%;background:var(--protect-color);"></div></div><div class="csf-score-text">85%</div></div>
                        </div>
                        <div class="csf-category-desc">物理的・論理的資産へのアクセスを、認可されたユーザー、サービス、ハードウェアに限定</div>
                    </div>
                    <div class="csf-category protect" onclick="openCsfModal('pr-at')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">PR.AT</div><div class="csf-category-title">意識向上・トレーニング</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:78%;background:var(--protect-color);"></div></div><div class="csf-score-text">78%</div></div>
                        </div>
                        <div class="csf-category-desc">組織の人員にサイバーセキュリティ意識とトレーニングを提供</div>
                    </div>
                    <div class="csf-category protect" onclick="openCsfModal('pr-ds')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">PR.DS</div><div class="csf-category-title">データセキュリティ</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:82%;background:var(--protect-color);"></div></div><div class="csf-score-text">82%</div></div>
                        </div>
                        <div class="csf-category-desc">機密性、完全性、可用性を保護するためにデータを管理</div>
                    </div>
                    <div class="csf-category protect" onclick="openCsfModal('pr-ps')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">PR.PS</div><div class="csf-category-title">プラットフォームセキュリティ</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:80%;background:var(--protect-color);"></div></div><div class="csf-score-text">80%</div></div>
                        </div>
                        <div class="csf-category-desc">ハードウェア、ソフトウェア、サービスの物理的・論理的セキュリティを管理</div>
                    </div>
                    <div class="csf-category protect" onclick="openCsfModal('pr-ir')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">PR.IR</div><div class="csf-category-title">技術インフラのレジリエンス</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:84%;background:var(--protect-color);"></div></div><div class="csf-score-text">84%</div></div>
                        </div>
                        <div class="csf-category-desc">通常・有害な状態下で十分な可用性を確保するためのセキュリティアーキテクチャを管理</div>
                    </div>
                </div>

                <!-- CSF Detect Page -->
                <div class="page-view" id="page-csf-detect">
                    <div class="page-header"><h1 class="page-title">検知 (DETECT)</h1><p class="page-subtitle">サイバーセキュリティ攻撃と侵害の可能性を発見・分析</p></div>

                    <div class="card">
                        <div class="card-header"><h3 class="card-title">成熟度レベル</h3></div>
                        <div class="card-body">
                            <div class="csf-maturity">
                                <div class="csf-maturity-level"><span>1</span>初期</div>
                                <div class="csf-maturity-level"><span>2</span>反復可能</div>
                                <div class="csf-maturity-level current"><span>3</span>定義済み</div>
                                <div class="csf-maturity-level"><span>4</span>管理</div>
                                <div class="csf-maturity-level"><span>5</span>最適化</div>
                            </div>
                        </div>
                    </div>

                    <div class="csf-category detect" onclick="openCsfModal('de-cm')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">DE.CM</div><div class="csf-category-title">継続的モニタリング</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:72%;background:var(--detect-color);"></div></div><div class="csf-score-text">72%</div></div>
                        </div>
                        <div class="csf-category-desc">資産を継続的に監視し、異常、侵害の指標、その他の有害なイベントを発見</div>
                    </div>
                    <div class="csf-category detect" onclick="openCsfModal('de-ae')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">DE.AE</div><div class="csf-category-title">有害イベント分析</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:78%;background:var(--detect-color);"></div></div><div class="csf-score-text">78%</div></div>
                        </div>
                        <div class="csf-category-desc">異常、侵害の指標、その他の有害なイベントを分析し、イベントを特徴付け、サイバーセキュリティインシデントを検知</div>
                    </div>
                </div>

                <!-- CSF Respond Page -->
                <div class="page-view" id="page-csf-respond">
                    <div class="page-header"><h1 class="page-title">対応 (RESPOND)</h1><p class="page-subtitle">検知されたサイバーセキュリティインシデントに対応するためのアクションを実行</p></div>

                    <div class="card">
                        <div class="card-header"><h3 class="card-title">成熟度レベル</h3></div>
                        <div class="card-body">
                            <div class="csf-maturity">
                                <div class="csf-maturity-level"><span>1</span>初期</div>
                                <div class="csf-maturity-level"><span>2</span>反復可能</div>
                                <div class="csf-maturity-level"><span>3</span>定義済み</div>
                                <div class="csf-maturity-level current"><span>4</span>管理</div>
                                <div class="csf-maturity-level"><span>5</span>最適化</div>
                            </div>
                        </div>
                    </div>

                    <div class="csf-category respond" onclick="openCsfModal('rs-ma')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">RS.MA</div><div class="csf-category-title">インシデント管理</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:85%;background:var(--respond-color);"></div></div><div class="csf-score-text">85%</div></div>
                        </div>
                        <div class="csf-category-desc">サイバーセキュリティインシデントへの対応を管理</div>
                    </div>
                    <div class="csf-category respond" onclick="openCsfModal('rs-an')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">RS.AN</div><div class="csf-category-title">インシデント分析</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:78%;background:var(--respond-color);"></div></div><div class="csf-score-text">78%</div></div>
                        </div>
                        <div class="csf-category-desc">効果的な対応と復旧活動をサポートするための調査を実施</div>
                    </div>
                    <div class="csf-category respond" onclick="openCsfModal('rs-co')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">RS.CO</div><div class="csf-category-title">インシデント対応の報告・連絡</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:80%;background:var(--respond-color);"></div></div><div class="csf-score-text">80%</div></div>
                        </div>
                        <div class="csf-category-desc">法律、規制、ポリシーに従って、内外の利害関係者と対応活動を調整</div>
                    </div>
                    <div class="csf-category respond" onclick="openCsfModal('rs-mi')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">RS.MI</div><div class="csf-category-title">インシデント緩和</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:76%;background:var(--respond-color);"></div></div><div class="csf-score-text">76%</div></div>
                        </div>
                        <div class="csf-category-desc">インシデントの拡大を防止し、その影響を緩和するためのアクティビティを実行</div>
                    </div>
                </div>

                <!-- CSF Recover Page -->
                <div class="page-view" id="page-csf-recover">
                    <div class="page-header"><h1 class="page-title">復旧 (RECOVER)</h1><p class="page-subtitle">サイバーセキュリティインシデントの影響を受けた資産と運用を復元</p></div>

                    <div class="card">
                        <div class="card-header"><h3 class="card-title">成熟度レベル</h3></div>
                        <div class="card-body">
                            <div class="csf-maturity">
                                <div class="csf-maturity-level"><span>1</span>初期</div>
                                <div class="csf-maturity-level"><span>2</span>反復可能</div>
                                <div class="csf-maturity-level current"><span>3</span>定義済み</div>
                                <div class="csf-maturity-level"><span>4</span>管理</div>
                                <div class="csf-maturity-level"><span>5</span>最適化</div>
                            </div>
                        </div>
                    </div>

                    <div class="csf-category recover" onclick="openCsfModal('rc-rp')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">RC.RP</div><div class="csf-category-title">インシデント復旧計画実行</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:70%;background:var(--recover-color);"></div></div><div class="csf-score-text">70%</div></div>
                        </div>
                        <div class="csf-category-desc">復旧活動の復旧部分を実行し、通常の運用を回復</div>
                    </div>
                    <div class="csf-category recover" onclick="openCsfModal('rc-co')">
                        <div class="csf-category-header">
                            <div><div class="csf-category-id">RC.CO</div><div class="csf-category-title">インシデント復旧の連絡</div></div>
                            <div class="csf-category-score"><div class="csf-score-bar"><div class="csf-score-fill" style="width:74%;background:var(--recover-color);"></div></div><div class="csf-score-text">74%</div></div>
                        </div>
                        <div class="csf-category-desc">内外の関係者と復旧活動を調整</div>
                    </div>
                </div>

                <!-- Service Catalog Page -->
                <div class="page-view" id="page-service-catalog">
                    <div class="page-header"><h1 class="page-title">サービスカタログ</h1><p class="page-subtitle">利用可能なITサービスを申請</p></div>
                    <div class="tabs"><div class="tab active">すべて</div><div class="tab">アカウント・権限</div><div class="tab">ハードウェア</div><div class="tab">ソフトウェア</div><div class="tab">セキュリティ</div></div>
                    <div class="catalog-grid">
                        <div class="catalog-card"><div class="catalog-icon" style="background:rgba(37,99,235,0.1);color:var(--primary-color);"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div><div class="catalog-title">新規アカウント作成</div><div class="catalog-desc">AD、メール、業務システムのアカウントを一括作成</div><div class="catalog-meta"><span class="catalog-sla">2営業日</span><span>人事部承認必要</span></div></div>
                        <div class="catalog-card"><div class="catalog-icon" style="background:rgba(34,197,94,0.1);color:var(--success-color);"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div><div class="catalog-title">パスワードリセット</div><div class="catalog-desc">各システムのパスワードをリセット</div><div class="catalog-meta"><span class="catalog-sla">4時間</span><span>自動承認</span></div></div>
                        <div class="catalog-card"><div class="catalog-icon" style="background:rgba(139,92,246,0.1);color:#8b5cf6;"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></div><div class="catalog-title">PC・モニター申請</div><div class="catalog-desc">新規PC、モニター、周辺機器の手配</div><div class="catalog-meta"><span class="catalog-sla">5営業日</span><span>部門長承認必要</span></div></div>
                        <div class="catalog-card"><div class="catalog-icon" style="background:rgba(239,68,68,0.1);color:var(--danger-color);"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div><div class="catalog-title">セキュリティ例外申請</div><div class="catalog-desc">セキュリティポリシーの例外申請（CSF準拠）</div><div class="catalog-meta"><span class="catalog-sla">要審査</span><span>CISO承認必要</span></div></div>
                    </div>
                </div>

                <!-- Incidents Page -->
                <div class="page-view" id="page-incidents">
                    <div class="page-header" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;"><div><h1 class="page-title">インシデント管理</h1><p class="page-subtitle">すべてのインシデントチケットを管理</p></div><button class="btn btn-primary"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>新規インシデント</button></div>
                    <div class="card"><div class="card-body" style="padding:0;"><table><thead><tr><th>ID</th><th>件名</th><th>カテゴリ</th><th>優先度</th><th>担当者</th><th>状態</th></tr></thead><tbody><tr><td><strong>INC-0892</strong></td><td>メールサーバー接続エラー</td><td>インフラ</td><td><span class="priority-badge priority-critical">緊急</span></td><td>山田太郎</td><td><span class="status-badge status-progress">対応中</span></td></tr><tr><td><strong>INC-0891</strong></td><td>VPN接続が断続的に切断</td><td>ネットワーク</td><td><span class="priority-badge priority-high">高</span></td><td>佐藤花子</td><td><span class="status-badge status-open">オープン</span></td></tr><tr><td><strong>INC-0890</strong></td><td>プリンター印刷キュー停止</td><td>ハードウェア</td><td><span class="priority-badge priority-medium">中</span></td><td>鈴木一郎</td><td><span class="status-badge status-progress">対応中</span></td></tr></tbody></table></div></div>
                </div>

                <!-- Changes Page -->
                <div class="page-view" id="page-changes">
                    <div class="page-header"><h1 class="page-title">変更管理</h1><p class="page-subtitle">システム変更の計画と承認プロセス</p></div>
                    <div class="card"><div class="card-body" style="padding:0;"><table><thead><tr><th>変更ID</th><th>タイトル</th><th>種別</th><th>リスク</th><th>実施予定日</th><th>状態</th></tr></thead><tbody><tr><td><strong>CHG-0158</strong></td><td>メールサーバーのメモリ増設</td><td>標準変更</td><td><span class="priority-badge priority-medium">中</span></td><td>01/20</td><td><span class="status-badge status-pending">承認待ち</span></td></tr><tr><td><strong>CHG-0157</strong></td><td>ファイアウォールルール更新</td><td>標準変更</td><td><span class="priority-badge priority-low">低</span></td><td>01/18</td><td><span class="status-badge status-resolved">承認済み</span></td></tr></tbody></table></div></div>
                </div>

                <!-- Assets Page -->
                <div class="page-view" id="page-assets">
                    <div class="page-header"><h1 class="page-title">資産管理 (CMDB)</h1><p class="page-subtitle">IT資産のインベントリと構成管理</p></div>
                    <div class="stats-grid"><div class="stat-card"><div class="stat-value">1,247</div><div class="stat-label">総資産数</div></div><div class="stat-card"><div class="stat-value">892</div><div class="stat-label">アクティブ</div></div><div class="stat-card"><div class="stat-value">156</div><div class="stat-label">保管中</div></div><div class="stat-card"><div class="stat-value">45</div><div class="stat-label">更新予定</div></div></div>
                    <div class="card"><div class="card-body" style="padding:0;"><table><thead><tr><th>資産ID</th><th>名称</th><th>種別</th><th>使用者</th><th>状態</th></tr></thead><tbody><tr><td><strong>AST-PC-0892</strong></td><td>ThinkPad X1 Carbon</td><td>ノートPC</td><td>田中太郎</td><td><span class="status-badge status-resolved">稼働中</span></td></tr><tr><td><strong>AST-SV-0156</strong></td><td>Dell PowerEdge R740</td><td>サーバー</td><td>インフラチーム</td><td><span class="status-badge status-resolved">稼働中</span></td></tr></tbody></table></div></div>
                </div>

                <!-- Settings Page -->
                <div class="page-view" id="page-settings">
                    <div class="page-header"><h1 class="page-title">システム設定</h1><p class="page-subtitle">システムの設定とカスタマイズ</p></div>
                    <div class="grid-2"><div class="card"><div class="card-header"><h3 class="card-title">一般設定</h3></div><div class="card-body"><div class="form-group"><label class="form-label">組織名</label><input type="text" class="form-input" value="株式会社サンプル"></div><button class="btn btn-primary">設定を保存</button></div></div><div class="card"><div class="card-header"><h3 class="card-title">CSF設定</h3></div><div class="card-body"><div class="form-group"><label class="form-label">目標成熟度レベル</label><select class="form-select"><option>レベル3: 定義済み</option><option selected>レベル4: 管理</option><option>レベル5: 最適化</option></select></div><button class="btn btn-primary">設定を保存</button></div></div></div>
                </div>
            </div>
        </main>
    </div>

    <!-- CSF Detail Modal -->
    <div class="modal-overlay" id="csfModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="csfModalTitle">カテゴリ詳細</h3>
                <button class="modal-close" onclick="closeCsfModal()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
            </div>
            <div class="modal-body" id="csfModalBody">
                <!-- Dynamic content -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCsfModal()">閉じる</button>
                <button class="btn btn-primary">改善計画を作成</button>
            </div>
        </div>
    </div>

    <script>
        // CSF Data
        const csfData = {
            'gv-oc': {
                id: 'GV.OC',
                title: '組織コンテキスト',
                color: 'var(--govern-color)',
                desc: '組織のサイバーセキュリティリスク管理に影響する状況を理解',
                subcategories: [
                    { id: 'GV.OC-01', title: 'ミッションの理解', desc: '組織のミッションがサイバーセキュリティリスク管理の戦略的方向性を通知するために理解されている', controls: [{name: 'ミッションステートメントの文書化', status: 'implemented'}, {name: 'サイバーセキュリティとミッションの整合性レビュー', status: 'implemented'}] },
                    { id: 'GV.OC-02', title: '利害関係者の期待', desc: '内部および外部の利害関係者を決定し、彼らのニーズと期待を理解', controls: [{name: '利害関係者マッピング', status: 'implemented'}, {name: '期待事項の文書化', status: 'partial'}] },
                    { id: 'GV.OC-03', title: '法的・規制要件', desc: 'サイバーセキュリティに関する法的、規制、契約上の要件を理解・管理', controls: [{name: 'コンプライアンス要件一覧', status: 'implemented'}, {name: '定期的な法規制レビュー', status: 'implemented'}] },
                    { id: 'GV.OC-04', title: '重要な目標とサービス', desc: '組織の重要な目標と関連サービスを決定し、伝達', controls: [{name: '重要サービスの識別', status: 'implemented'}, {name: 'サービス依存関係のマッピング', status: 'partial'}] },
                    { id: 'GV.OC-05', title: '成果と活動の優先順位', desc: 'リスク戦略をサポートするために、重要度に基づいて成果と活動を優先', controls: [{name: '優先順位付けフレームワーク', status: 'implemented'}, {name: 'リスクベースの優先順位付け', status: 'implemented'}] }
                ]
            },
            'gv-rm': {
                id: 'GV.RM',
                title: 'リスク管理戦略',
                color: 'var(--govern-color)',
                desc: '組織の優先事項、制約、リスク許容度を確立し、運用リスク判断をサポート',
                subcategories: [
                    { id: 'GV.RM-01', title: 'リスク管理目標', desc: 'サイバーセキュリティリスク管理の目標を確立し、利害関係者と合意', controls: [{name: 'リスク管理目標の文書化', status: 'implemented'}, {name: '経営層との合意', status: 'implemented'}] },
                    { id: 'GV.RM-02', title: 'リスク許容度', desc: '運用リスク判断をサポートするためにリスク許容度と許容量を決定・伝達', controls: [{name: 'リスク許容度ステートメント', status: 'implemented'}, {name: 'リスク閾値の定義', status: 'partial'}] },
                    { id: 'GV.RM-03', title: '戦略的リスク評価', desc: 'サイバーセキュリティリスクを戦略的リスク評価活動に組み込む', controls: [{name: '統合リスク評価プロセス', status: 'implemented'}, {name: '定期的な戦略リスクレビュー', status: 'implemented'}] }
                ]
            },
            'gv-rr': {
                id: 'GV.RR',
                title: '役割・責任・権限',
                color: 'var(--govern-color)',
                desc: 'サイバーセキュリティの役割、責任、権限を確立し伝達',
                subcategories: [
                    { id: 'GV.RR-01', title: 'リーダーシップの責任', desc: '組織のリーダーはサイバーセキュリティリスク管理の責任を負う', controls: [{name: 'CISO任命', status: 'implemented'}, {name: '役員レベルの監督', status: 'implemented'}] },
                    { id: 'GV.RR-02', title: '役割と責任の定義', desc: 'サイバーセキュリティの役割と責任を確立し、伝達', controls: [{name: 'RACI マトリックス', status: 'implemented'}, {name: '職務記述書への反映', status: 'partial'}] }
                ]
            },
            'gv-po': {
                id: 'GV.PO',
                title: 'ポリシー',
                color: 'var(--govern-color)',
                desc: '組織のサイバーセキュリティポリシーを確立、伝達、施行',
                subcategories: [
                    { id: 'GV.PO-01', title: 'ポリシーの確立', desc: '組織のリスク戦略に基づいてサイバーセキュリティポリシーを確立', controls: [{name: '情報セキュリティポリシー', status: 'implemented'}, {name: 'アクセス制御ポリシー', status: 'implemented'}, {name: 'インシデント対応ポリシー', status: 'implemented'}] },
                    { id: 'GV.PO-02', title: 'ポリシーのレビュー', desc: 'ポリシーを定期的にレビューし、更新', controls: [{name: '年次ポリシーレビュー', status: 'implemented'}, {name: '変更管理プロセス', status: 'implemented'}] }
                ]
            },
            'gv-ov': {
                id: 'GV.OV',
                title: '監督',
                color: 'var(--govern-color)',
                desc: '組織全体のサイバーセキュリティリスク管理活動と結果のレビュー',
                subcategories: [
                    { id: 'GV.OV-01', title: 'リスク管理のレビュー', desc: 'サイバーセキュリティリスク管理のパフォーマンスを評価・調整', controls: [{name: '四半期レビュー会議', status: 'implemented'}, {name: 'KPIダッシュボード', status: 'implemented'}] },
                    { id: 'GV.OV-02', title: '戦略への調整', desc: 'サイバーセキュリティリスク管理戦略を見直し、調整', controls: [{name: '戦略整合性レビュー', status: 'partial'}, {name: '改善計画の追跡', status: 'implemented'}] }
                ]
            },
            'gv-sc': {
                id: 'GV.SC',
                title: 'サプライチェーンリスク管理',
                color: 'var(--govern-color)',
                desc: 'サイバーサプライチェーンリスク管理プロセスの識別、確立、管理、監視、改善',
                subcategories: [
                    { id: 'GV.SC-01', title: 'サプライチェーンリスク管理プログラム', desc: 'サイバーサプライチェーンリスク管理プログラムを確立', controls: [{name: 'SCRM ポリシー', status: 'implemented'}, {name: 'サプライヤー評価基準', status: 'partial'}] },
                    { id: 'GV.SC-02', title: 'サプライヤーのリスク評価', desc: 'サプライヤーを識別し、リスクに基づいて優先順位付け', controls: [{name: 'サプライヤーリスク評価', status: 'partial'}, {name: '重要サプライヤーの監視', status: 'planned'}] }
                ]
            },
            'id-am': {
                id: 'ID.AM',
                title: '資産管理',
                color: 'var(--identify-color)',
                desc: '組織がビジネス目標達成とリスク戦略に沿って、資産を識別・管理',
                subcategories: [
                    { id: 'ID.AM-01', title: 'ハードウェア資産', desc: '組織が所有・管理するハードウェア資産のインベントリを維持', controls: [{name: 'CMDB', status: 'implemented'}, {name: '自動検出ツール', status: 'implemented'}] },
                    { id: 'ID.AM-02', title: 'ソフトウェア資産', desc: 'ソフトウェア、サービス、システムのインベントリを維持', controls: [{name: 'ソフトウェア資産管理', status: 'implemented'}, {name: 'ライセンス管理', status: 'partial'}] },
                    { id: 'ID.AM-03', title: 'データ分類', desc: '組織のデータとそれを処理するシステムを識別・分類', controls: [{name: 'データ分類ポリシー', status: 'implemented'}, {name: 'データマッピング', status: 'partial'}] }
                ]
            },
            'id-ra': {
                id: 'ID.RA',
                title: 'リスクアセスメント',
                color: 'var(--identify-color)',
                desc: '組織が資産に対するサイバーセキュリティリスクを理解',
                subcategories: [
                    { id: 'ID.RA-01', title: '脆弱性の識別', desc: '資産の脆弱性を識別し、文書化', controls: [{name: '脆弱性スキャン', status: 'implemented'}, {name: 'ペネトレーションテスト', status: 'implemented'}] },
                    { id: 'ID.RA-02', title: '脅威インテリジェンス', desc: '内部および外部のソースから脅威インテリジェンスを受信', controls: [{name: '脅威インテリジェンスフィード', status: 'implemented'}, {name: '業界ISACへの参加', status: 'partial'}] }
                ]
            },
            'id-im': {
                id: 'ID.IM',
                title: '改善',
                color: 'var(--identify-color)',
                desc: '組織のサイバーセキュリティリスク管理プロセスの改善を識別',
                subcategories: [
                    { id: 'ID.IM-01', title: '改善の識別', desc: '評価、テスト、演習から改善を識別', controls: [{name: '監査結果の追跡', status: 'implemented'}, {name: '改善計画の管理', status: 'implemented'}] }
                ]
            },
            'pr-aa': {
                id: 'PR.AA',
                title: 'ID管理・認証・アクセス制御',
                color: 'var(--protect-color)',
                desc: '物理的・論理的資産へのアクセスを、認可されたユーザー、サービス、ハードウェアに限定',
                subcategories: [
                    { id: 'PR.AA-01', title: 'ID管理', desc: 'ユーザー、サービス、ハードウェアのIDを管理', controls: [{name: 'ID管理システム', status: 'implemented'}, {name: 'ライフサイクル管理', status: 'implemented'}] },
                    { id: 'PR.AA-02', title: '認証', desc: 'IDは認証によって証明され検証される', controls: [{name: '多要素認証', status: 'implemented'}, {name: 'パスワードポリシー', status: 'implemented'}] },
                    { id: 'PR.AA-03', title: 'アクセス制御', desc: '最小権限とネットワークセグメンテーションを使用', controls: [{name: 'RBAC実装', status: 'implemented'}, {name: 'ネットワークセグメンテーション', status: 'partial'}] }
                ]
            },
            'pr-at': {
                id: 'PR.AT',
                title: '意識向上・トレーニング',
                color: 'var(--protect-color)',
                desc: '組織の人員にサイバーセキュリティ意識とトレーニングを提供',
                subcategories: [
                    { id: 'PR.AT-01', title: 'セキュリティ意識向上', desc: '全ユーザーにセキュリティ意識向上トレーニングを提供', controls: [{name: '年次セキュリティ研修', status: 'implemented'}, {name: 'フィッシング訓練', status: 'implemented'}] },
                    { id: 'PR.AT-02', title: '特権ユーザートレーニング', desc: '特権ユーザーに役割に適したトレーニングを提供', controls: [{name: '管理者向け研修', status: 'partial'}, {name: 'セキュリティ認定取得', status: 'planned'}] }
                ]
            },
            'pr-ds': {
                id: 'PR.DS',
                title: 'データセキュリティ',
                color: 'var(--protect-color)',
                desc: '機密性、完全性、可用性を保護するためにデータを管理',
                subcategories: [
                    { id: 'PR.DS-01', title: '保存データの保護', desc: '保存データを保護', controls: [{name: 'ディスク暗号化', status: 'implemented'}, {name: 'データベース暗号化', status: 'implemented'}] },
                    { id: 'PR.DS-02', title: '転送中データの保護', desc: '転送中のデータを保護', controls: [{name: 'TLS/SSL実装', status: 'implemented'}, {name: 'VPN', status: 'implemented'}] }
                ]
            },
            'pr-ps': {
                id: 'PR.PS',
                title: 'プラットフォームセキュリティ',
                color: 'var(--protect-color)',
                desc: 'ハードウェア、ソフトウェア、サービスの物理的・論理的セキュリティを管理',
                subcategories: [
                    { id: 'PR.PS-01', title: '構成管理', desc: 'IT資産の構成を管理', controls: [{name: '構成管理ツール', status: 'implemented'}, {name: 'ベースライン管理', status: 'partial'}] },
                    { id: 'PR.PS-02', title: 'ソフトウェア管理', desc: 'ソフトウェアをライフサイクルを通じて管理', controls: [{name: 'パッチ管理', status: 'implemented'}, {name: 'アプリケーション許可リスト', status: 'partial'}] }
                ]
            },
            'pr-ir': {
                id: 'PR.IR',
                title: '技術インフラのレジリエンス',
                color: 'var(--protect-color)',
                desc: '通常・有害な状態下で十分な可用性を確保するためのセキュリティアーキテクチャを管理',
                subcategories: [
                    { id: 'PR.IR-01', title: '冗長性', desc: '重要な資産に冗長性を提供', controls: [{name: 'HA構成', status: 'implemented'}, {name: 'バックアップシステム', status: 'implemented'}] },
                    { id: 'PR.IR-02', title: '容量計画', desc: '正常および有害な条件下で容量要件を満たす', controls: [{name: 'キャパシティ監視', status: 'implemented'}, {name: '容量計画', status: 'implemented'}] }
                ]
            },
            'de-cm': {
                id: 'DE.CM',
                title: '継続的モニタリング',
                color: 'var(--detect-color)',
                desc: '資産を継続的に監視し、異常、侵害の指標、その他の有害なイベントを発見',
                subcategories: [
                    { id: 'DE.CM-01', title: 'ネットワーク監視', desc: 'ネットワークを監視し、有害なイベントを検出', controls: [{name: 'IDS/IPS', status: 'implemented'}, {name: 'ネットワークフロー分析', status: 'partial'}] },
                    { id: 'DE.CM-02', title: '物理環境の監視', desc: '物理環境を監視し、有害なイベントを検出', controls: [{name: '入退室管理', status: 'implemented'}, {name: '監視カメラ', status: 'implemented'}] },
                    { id: 'DE.CM-03', title: 'ユーザー活動の監視', desc: 'ユーザー活動を監視し、有害なイベントを検出', controls: [{name: 'SIEM', status: 'partial'}, {name: 'UBA/UEBA', status: 'planned'}] }
                ]
            },
            'de-ae': {
                id: 'DE.AE',
                title: '有害イベント分析',
                color: 'var(--detect-color)',
                desc: '異常、侵害の指標、その他の有害なイベントを分析し、イベントを特徴付け、サイバーセキュリティインシデントを検知',
                subcategories: [
                    { id: 'DE.AE-01', title: 'イベント分析', desc: '検出されたイベントを分析し、攻撃を理解', controls: [{name: 'ログ分析', status: 'implemented'}, {name: '相関ルール', status: 'partial'}] },
                    { id: 'DE.AE-02', title: 'インシデント判定', desc: '分析結果からインシデントを判定', controls: [{name: 'エスカレーション基準', status: 'implemented'}, {name: 'SOC運用', status: 'partial'}] }
                ]
            },
            'rs-ma': {
                id: 'RS.MA',
                title: 'インシデント管理',
                color: 'var(--respond-color)',
                desc: 'サイバーセキュリティインシデントへの対応を管理',
                subcategories: [
                    { id: 'RS.MA-01', title: 'インシデント対応計画', desc: 'インシデント対応計画を実行', controls: [{name: 'インシデント対応手順', status: 'implemented'}, {name: '定期訓練', status: 'implemented'}] },
                    { id: 'RS.MA-02', title: 'インシデントトリアージ', desc: 'インシデントをトリアージし、優先順位付け', controls: [{name: '優先度マトリックス', status: 'implemented'}, {name: 'エスカレーションプロセス', status: 'implemented'}] }
                ]
            },
            'rs-an': {
                id: 'RS.AN',
                title: 'インシデント分析',
                color: 'var(--respond-color)',
                desc: '効果的な対応と復旧活動をサポートするための調査を実施',
                subcategories: [
                    { id: 'RS.AN-01', title: 'フォレンジック', desc: 'インシデントを調査し、根本原因を特定', controls: [{name: 'フォレンジックツール', status: 'implemented'}, {name: '証拠保全手順', status: 'partial'}] }
                ]
            },
            'rs-co': {
                id: 'RS.CO',
                title: 'インシデント対応の報告・連絡',
                color: 'var(--respond-color)',
                desc: '法律、規制、ポリシーに従って、内外の利害関係者と対応活動を調整',
                subcategories: [
                    { id: 'RS.CO-01', title: '内部連絡', desc: '内部の利害関係者と連絡を調整', controls: [{name: '連絡体制図', status: 'implemented'}, {name: '報告テンプレート', status: 'implemented'}] },
                    { id: 'RS.CO-02', title: '外部連絡', desc: '外部の利害関係者と連絡を調整', controls: [{name: '規制当局への報告手順', status: 'implemented'}, {name: '顧客通知プロセス', status: 'partial'}] }
                ]
            },
            'rs-mi': {
                id: 'RS.MI',
                title: 'インシデント緩和',
                color: 'var(--respond-color)',
                desc: 'インシデントの拡大を防止し、その影響を緩和するためのアクティビティを実行',
                subcategories: [
                    { id: 'RS.MI-01', title: '封じ込め', desc: 'インシデントを封じ込め', controls: [{name: '隔離手順', status: 'implemented'}, {name: 'ネットワーク遮断', status: 'implemented'}] },
                    { id: 'RS.MI-02', title: '根絶', desc: 'インシデントを根絶', controls: [{name: 'マルウェア除去', status: 'partial'}, {name: '脆弱性修正', status: 'implemented'}] }
                ]
            },
            'rc-rp': {
                id: 'RC.RP',
                title: 'インシデント復旧計画実行',
                color: 'var(--recover-color)',
                desc: '復旧活動の復旧部分を実行し、通常の運用を回復',
                subcategories: [
                    { id: 'RC.RP-01', title: '復旧計画', desc: '復旧計画を実行', controls: [{name: 'BCP/DRP', status: 'implemented'}, {name: '復旧手順書', status: 'partial'}] },
                    { id: 'RC.RP-02', title: '復旧検証', desc: '復旧を検証', controls: [{name: '復旧テスト', status: 'partial'}, {name: '定期DR訓練', status: 'planned'}] }
                ]
            },
            'rc-co': {
                id: 'RC.CO',
                title: 'インシデント復旧の連絡',
                color: 'var(--recover-color)',
                desc: '内外の関係者と復旧活動を調整',
                subcategories: [
                    { id: 'RC.CO-01', title: '復旧状況の連絡', desc: '復旧状況を関係者に連絡', controls: [{name: 'ステータス報告', status: 'implemented'}, {name: '顧客コミュニケーション', status: 'partial'}] }
                ]
            }
        };

        function showPage(pageId) {
            document.querySelectorAll('.page-view').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => {
                i.classList.remove('active');
                if (i.dataset.page === pageId) i.classList.add('active');
            });
            document.getElementById('sidebar').classList.remove('open');
        }

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                const page = item.dataset.page;
                if (page) showPage(page);
            });
        });

        document.getElementById('menuToggle').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('open');
        });

        function openCsfModal(categoryId) {
            const data = csfData[categoryId];
            if (!data) return;

            document.getElementById('csfModalTitle').textContent = data.id + ' - ' + data.title;

            let html = `
                <div class="csf-detail-header">
                    <div class="csf-detail-icon" style="background:${data.color}20;color:${data.color};">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    </div>
                    <div class="csf-detail-info">
                        <h2>${data.title}</h2>
                        <p>${data.desc}</p>
                    </div>
                </div>
            `;

            data.subcategories.forEach(sub => {
                html += `
                    <div class="csf-subcategory">
                        <div class="csf-subcategory-header">
                            <span class="csf-subcategory-id">${sub.id}</span>
                        </div>
                        <div class="csf-subcategory-title">${sub.title}</div>
                        <div class="csf-subcategory-desc">${sub.desc}</div>
                        <ul class="csf-control-list">
                `;
                sub.controls.forEach(ctrl => {
                    const statusIcon = ctrl.status === 'implemented' ? '✓' : ctrl.status === 'partial' ? '◐' : ctrl.status === 'planned' ? '○' : '✕';
                    html += `
                        <li class="csf-control-item">
                            <div class="csf-control-status ${ctrl.status}">${statusIcon}</div>
                            <span>${ctrl.name}</span>
                        </li>
                    `;
                });
                html += `</ul></div>`;
            });

            document.getElementById('csfModalBody').innerHTML = html;
            document.getElementById('csfModal').classList.add('active');
        }

        function closeCsfModal() {
            document.getElementById('csfModal').classList.remove('active');
        }

        document.getElementById('csfModal').addEventListener('click', e => {
            if (e.target.id === 'csfModal') closeCsfModal();
        });

        document.querySelectorAll('.tabs .tab').forEach(tab => {
            tab.addEventListener('click', () => {
                tab.parentElement.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });
    </script>
</body>
</html>
