<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ISO 20000ã¨NIST CSF 2.0ã«æº–æ‹ ã—ãŸçµ±åˆITã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ">
    <title>ITSM-Sec Nexus | ISO 20000 & NIST CSF 2.0</title>
    <script>
        // ç’°å¢ƒã«å¿œã˜ã¦ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒãƒƒã‚¸ã‚’å‹•çš„ã«å¤‰æ›´ï¼ˆãƒãƒ¼ãƒˆç•ªå·ã§åˆ¤å®šï¼‰
        (function() {
            const port = window.location.port;
            const isDevelopment = (port === '5443'); // é–‹ç™ºç’°å¢ƒ: ãƒãƒ¼ãƒˆ5443
            const envPrefix = isDevelopment ? '[é–‹ç™º] ' : '[æœ¬ç•ª] ';
            document.title = envPrefix + 'ITSM-Sec Nexus | ISO 20000 & NIST CSF 2.0';

            // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã«ç’°å¢ƒãƒãƒƒã‚¸ã‚’è¿½åŠ 
            window.addEventListener('DOMContentLoaded', function() {
                const loginHeader = document.querySelector('.login-header');
                if (loginHeader) {
                    const envBadge = document.createElement('div');
                    envBadge.style.cssText = isDevelopment
                        ? 'position: absolute; top: 16px; right: 16px; background: linear-gradient(135deg, #16a34a, #15803d); color: white; padding: 8px 16px; border-radius: 8px; font-weight: 700; font-size: 0.85rem; box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3); letter-spacing: 0.5px;'
                        : 'position: absolute; top: 16px; right: 16px; background: linear-gradient(135deg, #dc2626, #991b1b); color: white; padding: 8px 16px; border-radius: 8px; font-weight: 700; font-size: 0.85rem; box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3); letter-spacing: 0.5px;';
                    envBadge.textContent = isDevelopment ? 'ğŸ”§ é–‹ç™ºç’°å¢ƒ' : 'ğŸ”’ æœ¬ç•ªç’°å¢ƒ';

                    // login-cardã«ç›¸å¯¾ä½ç½®ã‚’è¨­å®š
                    const loginCard = document.querySelector('.login-card');
                    if (loginCard) {
                        loginCard.style.position = 'relative';
                        loginCard.insertBefore(envBadge, loginCard.firstChild);
                    }
                }
            });
        })();
    </script>
    <style>
        /* ç·Šæ€¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ« - CSSãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„å ´åˆã§ã‚‚ç¾ã—ãè¡¨ç¤º */
        body { margin: 0; font-family: 'Inter', -apple-system, sans-serif; }
        .skip-link { position: absolute; top: -40px; }
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #ffffff;
            background-image:
                radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.03) 0, transparent 50%),
                radial-gradient(at 100% 100%, rgba(139, 92, 246, 0.03) 0, transparent 50%);
            position: relative;
        }
        .login-card {
            background: #ffffff;
            border-radius: 16px;
            padding: 48px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            width: 100%;
            max-width: 440px;
            position: relative;
        }
        .login-header { text-align: center; margin-bottom: 32px; }
        .logo-icon-large {
            font-size: 80px;
            line-height: 1;
            margin: 0 auto 20px;
            text-align: center;
        }
        .login-header h1 {
            font-size: 2rem;
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        .login-header p {
            color: #64748b;
            font-size: 0.95rem;
            font-weight: 500;
        }
        .form-group { margin-bottom: 20px; }
        .login-form label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1e293b;
        }
        .login-form input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        .login-form input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        .btn-login {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }
        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.3);
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
        }
        .login-footer { margin-top: 24px; text-align: center; }
        .text-muted { color: #64748b; font-size: 0.85rem; }
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            border: 0;
        }
        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
    </style>
    <link rel="stylesheet" href="style.css?v=1768533382">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/fontawesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <!-- i18next for internationalization -->
    <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.6/i18next.min.js"></script>
</head>

<body>
    <!-- ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯ï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ï¼‰ -->
    <a href="#main-content" class="skip-link">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã‚¹ã‚­ãƒƒãƒ—</a>

    <!-- Login Screen -->
    <div id="login-screen" class="login-container" role="main" aria-label="ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢">
        <div class="login-card">
            <header class="login-header">
                <div class="logo-icon-large" role="img" aria-label="ITSMã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚´">ğŸ›¡ï¸</div>
                <h1>ITSM-Sec Nexus</h1>
                <p>ISO 20000 & NIST CSF 2.0 çµ±åˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
            </header>
            <form id="login-form" class="login-form" aria-labelledby="login-title" novalidate>
                <h2 id="login-title" class="visually-hidden">ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ </h2>
                <div class="form-group">
                    <label for="username">ãƒ¦ãƒ¼ã‚¶ãƒ¼å</label>
                    <input
                        type="text"
                        id="username"
                        name="username"
                        required
                        autocomplete="username"
                        aria-required="true"
                        aria-describedby="username-hint">
                    <span id="username-hint" class="visually-hidden">ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                </div>
                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input
                        type="password"
                        id="password"
                        name="password"
                        required
                        autocomplete="current-password"
                        aria-required="true"
                        aria-describedby="password-hint">
                    <span id="password-hint" class="visually-hidden">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</span>
                </div>
                <div id="login-error" class="error-message" role="alert" aria-live="assertive" style="display: none;"></div>
                <button type="submit" class="btn-login" aria-label="ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³">
                    <i class="fas fa-sign-in-alt" aria-hidden="true"></i> ãƒ­ã‚°ã‚¤ãƒ³
                </button>
            </form>
            <footer class="login-footer">
                <p class="text-muted">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼: admin / admin123</p>
            </footer>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app-container" class="app-container" style="display: none;">
        <!-- Sidebar Overlay (Mobile) -->
        <div id="sidebar-overlay" class="sidebar-overlay" aria-hidden="true"></div>

        <!-- Sidebar Navigation -->
        <aside class="sidebar" role="navigation" aria-label="ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
            <div class="logo">
                <div class="logo-icon" role="img" aria-label="ITSMã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚´"></div>
                <span class="logo-text">ITSM System</span>
            </div>

            <nav class="nav-group" aria-label="ä¸€èˆ¬æ©Ÿèƒ½">
                <span class="nav-label" role="heading" aria-level="2">General</span>
                <a href="#" class="nav-item active" data-view="dash" aria-current="page">
                    <i class="fas fa-chart-line" aria-hidden="true"></i>
                    <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
                </a>
            </nav>

            <nav class="nav-group" aria-label="ISO 20000é‹ç”¨æ©Ÿèƒ½">
                <span class="nav-label" role="heading" aria-level="2">Operation (ISO 20000)</span>
                <a href="#" class="nav-item" data-view="incidents" aria-label="ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†">
                    <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
                    <span>ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="problems" aria-label="å•é¡Œç®¡ç†">
                    <i class="fas fa-brain" aria-hidden="true"></i>
                    <span>å•é¡Œç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="changes" aria-label="å¤‰æ›´ç®¡ç†">
                    <i class="fas fa-sync-alt" aria-hidden="true"></i>
                    <span>å¤‰æ›´ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="releases" aria-label="ãƒªãƒªãƒ¼ã‚¹ç®¡ç†">
                    <i class="fas fa-rocket" aria-hidden="true"></i>
                    <span>ãƒªãƒªãƒ¼ã‚¹ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="requests" aria-label="ã‚µãƒ¼ãƒ“ã‚¹è¦æ±‚ç®¡ç†">
                    <i class="fas fa-hand-holding-heart" aria-hidden="true"></i>
                    <span>ã‚µãƒ¼ãƒ“ã‚¹è¦æ±‚ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="cmdb" aria-label="æ§‹æˆç®¡ç† (CMDB)">
                    <i class="fas fa-database" aria-hidden="true"></i>
                    <span>æ§‹æˆç®¡ç† (CMDB)</span>
                </a>
            </nav>

            <nav class="nav-group" aria-label="ã‚¬ãƒãƒŠãƒ³ã‚¹ã¨æˆ¦ç•¥">
                <span class="nav-label" role="heading" aria-level="2">Governance & Strategy</span>
                <a href="#" class="nav-item" data-view="sla" aria-label="SLAç®¡ç†">
                    <i class="fas fa-file-contract" aria-hidden="true"></i>
                    <span>SLAç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="sla-alerts" aria-label="SLAã‚¢ãƒ©ãƒ¼ãƒˆå±¥æ­´">
                    <i class="fas fa-bell" aria-hidden="true"></i>
                    <span>SLAã‚¢ãƒ©ãƒ¼ãƒˆå±¥æ­´</span>
                </a>
                <a href="#" class="nav-item" data-view="knowledge" aria-label="ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†">
                    <i class="fas fa-book" aria-hidden="true"></i>
                    <span>ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="capacity" aria-label="ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ç®¡ç†">
                    <i class="fas fa-server" aria-hidden="true"></i>
                    <span>ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ç®¡ç†</span>
                </a>
            </nav>

            <nav class="nav-group" aria-label="NIST CSF 2.0ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½">
                <span class="nav-label" role="heading" aria-level="2">Security (NIST CSF 2.0)</span>
                <a href="#" class="nav-item" data-view="security-dashboard" aria-label="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰">
                    <i class="fas fa-shield-alt" aria-hidden="true"></i>
                    <span>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
                </a>
                <a href="#" class="nav-item" data-view="security" aria-label="è„†å¼±æ€§ç®¡ç†">
                    <i class="fas fa-bug" aria-hidden="true"></i>
                    <span>è„†å¼±æ€§ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="security-management" aria-label="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†">
                    <i class="fas fa-lock" aria-hidden="true"></i>
                    <span>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç®¡ç†</span>
                </a>
            </nav>

            <nav class="nav-group" aria-label="ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ©Ÿèƒ½">
                <span class="nav-label" role="heading" aria-level="2">Compliance</span>
                <a href="#" class="nav-item" data-view="audit-dashboard" aria-label="ç›£æŸ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰">
                    <i class="fas fa-chart-line" aria-hidden="true"></i>
                    <span>ç›£æŸ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
                </a>
                <a href="#" class="nav-item" data-view="audit-logs" aria-label="ç›£æŸ»ãƒ­ã‚°">
                    <i class="fas fa-file-alt" aria-hidden="true"></i>
                    <span>ç›£æŸ»ãƒ­ã‚°</span>
                </a>
                <a href="#" class="nav-item" data-view="compliance-policies" aria-label="ãƒãƒªã‚·ãƒ¼ãƒ»ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ç®¡ç†">
                    <i class="fas fa-book" aria-hidden="true"></i>
                    <span>ãƒãƒªã‚·ãƒ¼ãƒ»ãƒ—ãƒ­ã‚·ãƒ¼ã‚¸ãƒ£ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="compliance-management" aria-label="ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç®¡ç†">
                    <i class="fas fa-clipboard-check" aria-hidden="true"></i>
                    <span>ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç®¡ç†</span>
                </a>
            </nav>

            <nav class="nav-group" aria-label="è¨­å®š">
                <span class="nav-label" role="heading" aria-level="2">Settings</span>
                <a href="#" class="nav-item" data-view="user-settings" aria-label="ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š">
                    <i class="fas fa-user-cog" aria-hidden="true"></i>
                    <span>ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š</span>
                </a>
            </nav>

            <nav class="nav-group" aria-label="ã‚·ã‚¹ãƒ†ãƒ è¨­å®š">
                <span class="nav-label" role="heading" aria-level="2">System Configuration</span>
                <a href="#" class="nav-item" data-view="settings_general" aria-label="ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬è¨­å®š">
                    <i class="fas fa-cog" aria-hidden="true"></i>
                    <span>ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬è¨­å®š</span>
                </a>
                <a href="#" class="nav-item" data-view="settings_users" aria-label="ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»æ¨©é™ç®¡ç†">
                    <i class="fas fa-users-cog" aria-hidden="true"></i>
                    <span>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»æ¨©é™ç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="settings_notifications" aria-label="é€šçŸ¥è¨­å®š">
                    <i class="fas fa-bell" aria-hidden="true"></i>
                    <span>é€šçŸ¥è¨­å®š</span>
                </a>
                <a href="#" class="nav-item" data-view="settings_reports" aria-label="ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†">
                    <i class="fas fa-file-alt" aria-hidden="true"></i>
                    <span>ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†</span>
                </a>
                <a href="#" class="nav-item" data-view="settings_integrations" aria-label="çµ±åˆè¨­å®š">
                    <i class="fas fa-plug" aria-hidden="true"></i>
                    <span>çµ±åˆè¨­å®š</span>
                </a>
            </nav>

            <!-- Logout Button -->
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn-logout" aria-label="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³">
                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                    <span>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>
                </button>
                <div class="user-info" role="status" aria-label="ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼">
                    <i class="fas fa-user-circle" aria-hidden="true"></i>
                    <span id="current-user"></span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="main-content" role="main">
            <header class="header" role="banner">
                <div class="header-left">
                    <button id="sidebar-toggle" class="sidebar-toggle" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰" aria-expanded="false" aria-controls="sidebar">
                        <i class="fas fa-bars" aria-hidden="true"></i>
                    </button>
                    <h1 id="section-title">çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
                </div>
                <div class="header-right">
                    <!-- Language Switcher -->
                    <div id="language-switcher-container" style="margin-right: 16px;"></div>
                    <div class="badge badge-info" role="status" aria-live="polite" aria-label="ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°çŠ¶æ…‹">
                        <i class="fas fa-sync fa-spin" aria-hidden="true"></i> Live Monitoring
                    </div>
                </div>
            </header>

            <div class="content-area" id="main-view" role="region" aria-label="ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢" aria-live="polite">
                <!-- Content will be dynamically loaded here by app.js -->
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modal-overlay" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-body" style="display: none;">
        <div id="modal-container" class="modal-container">
            <div class="modal-header">
                <h2 id="modal-title"></h2>
                <button id="modal-close" class="modal-close-btn" aria-label="ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Dynamic content will be inserted here -->
            </div>
            <div class="modal-footer" id="modal-footer">
                <!-- Dynamic buttons will be inserted here -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <!-- i18n initialization script -->
    <script src="i18n.js"></script>
    <script src="app.js?v=1768533382"></script>
</body>

</html>
